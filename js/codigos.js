"use strict";var DEVELOPMENT=!1,uriSysef=location.protocol+(DEVELOPMENT?"//appwebsysef.test/":"//sysef.com/");Date.prototype.toDateInputValue=function(){var t=new Date(void 0);return t.setMinutes((void 0).getMinutes()-(void 0).getTimezoneOffset()),t.toJSON().slice(0,10)};var param=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(0<e.length&&(e+="&"),e+=encodeURI(n+"="+t[n]));return e},sendRequest=function(t,e,n,o){var a=new XMLHttpRequest;a.open(t,e),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.onload=function(){200===a.status?"function"==typeof o&&o(JSON.parse(a.responseText)):200!==a.status&&alert("En estos momentos no está disponible, vuelve a intentarlo más tarde por favor.")},a.send(param(n))};window.onload=function(){document.getElementById("fechaActual").innerText=(new Date).toLocaleDateString(),sendRequest("GET",uriSysef+"consultaexterna/comprobantesemitidos",{},function(t){document.getElementById("buttonComprobantes").innerHTML='<i class="fa fa-send"></i> &nbsp;'+t}),document.getElementById("sendRequest").addEventListener("click",function(){0!==document.getElementById("documentType").value.trim().length&&0!==document.getElementById("documentSerie").value.trim().length&&0!==document.getElementById("documentNumber").value.trim().length&&0!==document.getElementById("documentDate").value.trim().length&&0!==document.getElementById("documentClient").value.trim().length?/^\d+$/.test(document.getElementById("documentClient").value.trim())?(document.getElementById("ventasfe").innerHTML="<h1>Buscando comprobantes...</h1>",document.getElementById("ventaswef").innerHTML="",sendRequest("POST",uriSysef+"consultaexterna/clienteexterno",{documentClient:document.getElementById("documentClient").value.trim(),documentDate:document.getElementById("documentDate").value.trim(),documentSerie:document.getElementById("documentSerie").value.trim(),documentNumber:document.getElementById("documentNumber").value.trim(),documentType:document.getElementById("documentType").value.trim()},renderSearch)):alert("El RUC emisor es incorrecto"):alert("Por favor completa todos los campos")}),document.getElementById("formatoImpresion").addEventListener("change",function(){Array.from(document.getElementsByClassName("printButton")).forEach(function(t){t.setAttribute("href",t.getAttribute("href").substr(0,t.getAttribute("href").lastIndexOf("/"))+"/"+document.getElementById("formatoImpresion").value.trim())})})};var modalPlantilla=function(t,e,n){return'<div class="modal" data-modal-name="'+t+'">\n    <div class="modal__dialog">\n    <button class="modal__close" data-modal-dismiss>×</button>\n    <header class="modal__header">\n    <h3 class="modal__title">'+e+'</h3>\n    </header>\n    <div class="modal__content">\n    '+n+'\n    </div>\n    <footer class="modal__footer">\n    <button  data-modal-dismiss class="btn__close button">Cerrar</button>\n    </footer>\n    </div>\n    </div>'},renderSearch=function(t){var o=document.getElementById("formatoImpresion").value.trim(),e='<thead>\n        <tr>\n        <td style="min-width: 309px">Empresa</td>\n        <td class="text-center" style="min-width: 183px">Comprobante</td>\n        <td style="min-width: 300px">Cliente</td>\n        <td class="text-center">Total</td>\n        <td style="min-width: 168px" class="text-center">Fecha</td>\n        <td class="text-center">Estado</td>\n        <td class="text-center"></td>\n        </tr>\n    </thead>';if(document.getElementById("ventasfe").innerHTML="",document.getElementById("ventaswef").innerHTML="",(0===t.length||0===t.ventasfe.length&&0===t.ventaswef.length)&&(document.getElementById("ventasfe").innerHTML="<h1>No se encontraron resultados</h1>"),t.ventasfe&&0<t.ventasfe.length){var a="<table><caption>Comprobantes electrónicos emitidos</caption>"+e,i="";t.ventasfe.forEach(function(t){if(a+='<tr>\n                <td>\n                    <img src="'+uriSysef+"img/empresa/"+t.toficina.codigoEmpresa+'/logoEmpresarial.png" style="width:20px; height:20px; vertical-align:middle;"/> '+t.toficina.tempresa.razonSocial+'\n                </td>\n                <td class="text-center">('+t.tipoRecibo+") "+t.numeroRecibo+"</td>\n                <td>("+t.documentoCliente+") "+t.nombreCompletoCliente+'</td>\n                <td class="text-center">S/'+t.total+'</td>\n                <td class="text-center">'+t.fechaComprobanteEmitido+'</td>\n                <td class="text-center">'+(1===t.estado?'<span class="conforme">Conforme</span>':'<span class="anulado">Anulado</span>')+'</td>\n                <td class="text-center">\n                    <a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/imprimircomprobanteventa/"+t.codigoReciboVenta+"/"+o+'" target="_blank" title="Imprimir comprobante"><i class="fa fa-print"></i></a>\n                    <a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/descargarpdfxml/"+t.codigoReciboVenta+"/"+o+'" target="_blank" title="Descargar PDF y XML"><i class="fa fa-download"></i></a>',t.treciboventanotacredito&&0<t.treciboventanotacredito.length&&(a+='<a class="buttonAction" data-modal-trigger="credito-'+t.codigoReciboVenta+'" title="Notas de crédito">\n                    <i class="fa fa-bookmark-o"></i>\n                </a>'),t.treciboventanotadebito&&0<t.treciboventanotadebito.length&&(a+='<a class="buttonAction" data-modal-trigger="debito-'+t.codigoReciboVenta+'" title="Notas de débito">\n                    <i class="fa fa-bookmark"></i>\n                </a>'),a+="</td></tr>",t.treciboventanotacredito&&0<t.treciboventanotacredito.length){var e="<table>";t.treciboventanotacredito.forEach(function(t){e+="<tr>\n                        <td>"+t.numeroRecibo+"|"+t.fechaComprobanteEmitido+"|S/"+t.total+'</td>\n                        <td><a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/imprimircomprobantenotacredito/"+t.codigoReciboVentaNotaCredito+"/"+o+'" target="_blank" title="Imprimir Nota de Crédito"><i class="fa fa-print"></i></a>\n                        <a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/descargarpdfxmlnotacredito/"+t.codigoReciboVentaNotaCredito+"/"+o+'" target="_blank" title="Descargar PDF y XML"><i class="fa fa-download"></i></a>\n                        </td>\n                    </tr>'}),e+="</table>",i+=modalPlantilla("credito-"+t.codigoReciboVenta,"Notas de créditos",e)}if(t.treciboventanotadebito&&0<t.treciboventanotadebito.length){var n="<table>";t.treciboventanotadebito.forEach(function(t){n+="<tr>\n                        <td>"+t.numeroRecibo+"|"+t.fechaComprobanteEmitido+"|S/"+t.total+' </td>\n                        <td><a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/imprimircomprobantenotadebito/"+t.codigoReciboVentaNotaDebito+"/"+o+'" target="_blank" title="Imprimir Nota de Débito"><i class="fa fa-print"></i></a>\n                        <a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/descargarpdfxmlnotadebito/"+t.codigoReciboVentaNotaDebito+"/"+o+'" target="_blank" title="Descargar PDF y XML"><i class="fa fa-download"></i></a>\n                        </td>\n                    </tr>'}),n+="</table>",i+=modalPlantilla("debito-"+t.codigoReciboVenta,"Notas de débitos",n)}}),a+="</table>",document.getElementById("ventasfe").innerHTML=a,document.getElementById("modals").innerHTML=i}if(t.ventaswef&&0<t.ventaswef.length&&t.ventaswef.some(function(t){return null===t.treciboventa})){var n="<table><caption>Ventas por facturar</caption>"+e;t.ventaswef.forEach(function(t){null===t.treciboventa&&(n+='<tr>\n                <td>\n                    <img src="'+uriSysef+"img/empresa/"+t.toficina.codigoEmpresa+'/logoEmpresarial.png" style="width:20px; height:20px; vertical-align:middle;"/> '+t.toficina.tempresa.razonSocial+'\n                </td>\n                <td class="text-center">('+t.tipoRecibo+") "+t.numeroRecibo+"</td>\n                <td>("+t.documentoCliente+") "+t.nombreCompletoCliente+'</td>\n                <td class="text-center">S/'+t.total+'</td>\n                <td class="text-center">'+t.fechaComprobanteEmitido+'</td>\n                <td class="text-center">'+(1===t.estado?'<span class="conforme">Conforme</span>':'<span class="anulado">Anulado</span>')+'</td>\n                <td class="text-center">\n                    <a class="buttonAction printButton" href="'+uriSysef+"consultaexterna/imprimircomprobanteventasinfe/"+t.codigoReciboVentaOutEf+"/"+o+'" target="_blank" title="Imprimir comprobante"><i class="fa fa-print"></i></a>\n                </td></tr>')}),n+="</table>",document.getElementById("ventaswef").innerHTML=n}initModal()};
//# sourceMappingURL=codigos.js.map
